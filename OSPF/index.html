
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Multicast/">
      
      
        <link rel="next" href="../Route%20Redistribution/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>OSPF - Notes for CCNP SPRI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ospf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Notes for CCNP SPRI" class="md-header__button md-logo" aria-label="Notes for CCNP SPRI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Notes for CCNP SPRI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OSPF
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_3">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="blue"  aria-hidden="true"  type="radio" name="__palette" id="__palette_4">
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../BGP/" class="md-tabs__link">
        
  
    
  
  Scaling BGP

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../ISIS/" class="md-tabs__link">
        
  
    
  
  IS-IS

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../MPLS%20LDP/" class="md-tabs__link">
        
  
    
  
  Implementing and Verifying MPLS

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../MPLS%20TE/" class="md-tabs__link">
        
  
    
  
  MPLS TE

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Multicast/" class="md-tabs__link">
        
  
    
  
  Multicast

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  OSPF

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Route%20Redistribution/" class="md-tabs__link">
        
  
    
  
  Route Redistribution

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Routing%20Policy/" class="md-tabs__link">
        
  
    
  
  Routing Policy and Manipulation

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../SR%20TE/" class="md-tabs__link">
        
  
    
  
  SR Traffic Engineering

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Segment%20Routing/" class="md-tabs__link">
        
  
    
  
  Segment Routing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Notes for CCNP SPRI" class="md-nav__button md-logo" aria-label="Notes for CCNP SPRI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Notes for CCNP SPRI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scaling BGP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ISIS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IS-IS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../MPLS%20LDP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementing and Verifying MPLS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../MPLS%20TE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MPLS TE
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Multicast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multicast
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OSPF
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OSPF
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ospf-multiarea-overview" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Multiarea Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Multiarea Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiarea-advantages" class="md-nav__link">
    <span class="md-ellipsis">
      Multiarea advantages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirements-for-multiarea" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements for multiarea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Guidelines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf-area-and-lsa-types" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Area and LSA Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Area and LSA Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#area-types" class="md-nav__link">
    <span class="md-ellipsis">
      Area types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lsa-types" class="md-nav__link">
    <span class="md-ellipsis">
      LSA types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospfv2-path-selection" class="md-nav__link">
    <span class="md-ellipsis">
      OSPFv2 Path Selection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPFv2 Path Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-metric" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Metric
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-selection-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Path Selection Criteria
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospfv2-summarization" class="md-nav__link">
    <span class="md-ellipsis">
      OSPFv2 Summarization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPFv2 Summarization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ospf-interarea-route-summarization" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Interarea Route Summarization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Interarea Route Summarization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-example-on-abr-between-area-0-and-area-1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration example on ABR between Area 0 and Area 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-external-route-summarization" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF External Route Summarization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF External Route Summarization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-example-for-external-route-summarization" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration example for External Route Summarization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf-special-areas" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Special Areas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Special Areas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ospf-stubby-area" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Stubby Area
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Stubby Area">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-examples-stubby-area" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples - Stubby Area
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-totally-stubby-area" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Totally Stubby Area
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Totally Stubby Area">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-examples-totally-stubby-area" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples - Totally Stubby Area
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-nssa" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF NSSA
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF NSSA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-examples-nssa" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples - NSSA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-totally-nssa" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Totally NSSA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-area-design-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Area Design Guidelines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospfv2-virtual-links" class="md-nav__link">
    <span class="md-ellipsis">
      OSPFv2 Virtual Links
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPFv2 Virtual Links">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtual-link-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Virtual Link Use Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-link-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Virtual Link Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Virtual Link Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-examples-virtual-links" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples - Virtual Links
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-link-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Virtual Link Guidelines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf-fast-convergence" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Fast Convergence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF Fast Convergence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tuning-ospf-timers" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning OSPF Timers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cisco-nsf-and-nsr" class="md-nav__link">
    <span class="md-ellipsis">
      Cisco NSF and NSR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bidirectional-forwarding-detection-bfd" class="md-nav__link">
    <span class="md-ellipsis">
      Bidirectional Forwarding Detection (BFD)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bidirectional Forwarding Detection (BFD)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-bfd-for-ospf" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring BFD for OSPF
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ospf-for-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF for IPv6
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OSPF for IPv6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#different-or-renamed-lsas" class="md-nav__link">
    <span class="md-ellipsis">
      Different or renamed LSA's
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-lsas" class="md-nav__link">
    <span class="md-ellipsis">
      New LSA's
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-ospfv3" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring OSPFv3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-ospf" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting OSPF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting OSPF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#troubleshooting-incomplete-ospf-adjacency" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Incomplete OSPF Adjacency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ospf-route-exchange-troubleshooting-between-areas" class="md-nav__link">
    <span class="md-ellipsis">
      OSPF Route Exchange Troubleshooting between Areas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Route%20Redistribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route Redistribution
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Routing%20Policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing Policy and Manipulation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SR%20TE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SR Traffic Engineering
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Segment%20Routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segment Routing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ospf">OSPF</h1>
<h2 id="ospf-multiarea-overview">OSPF Multiarea Overview</h2>
<p>There are two types of areas within the area hierarchy of OSPF:</p>
<p><ins><strong>Backbone area, transit area, or Area 0</strong></ins>: the central entity through which all areas must connect through to exchange routing updates. Usually end users are not connected to this.</p>
<p><ins><strong>Regular area</strong></ins>: a.k.a. nonbackbone area. It will accept link updates, route summarizations, and external routes. Usually these are set up according to administrative or geographical groupings. </p>
<h3 id="multiarea-advantages">Multiarea advantages</h3>
<ul>
<li>Minimizes routing table</li>
<li>Localizes impact of topology changes (link flap)</li>
<li>Detailed LSA flooding stops at area boundaries</li>
</ul>
<h3 id="considerations">Considerations</h3>
<ul>
<li>Potential less optimal forwarding due to loss of granular routing info, maybe.</li>
<li>HA should be addressed at area border routes</li>
<li>MPLS TE benefits from single area to ensure it can always pick best path</li>
</ul>
<h3 id="requirements-for-multiarea">Requirements for multiarea</h3>
<ul>
<li>Area 0 is backbone, and all other areas must connect to it </li>
<li>All areas must be contiguous</li>
</ul>
<h3 id="guidelines">Guidelines</h3>
<table>
<thead>
<tr>
<th>Single Area</th>
<th>Multiple Areas</th>
</tr>
</thead>
<tbody>
<tr>
<td>Provides optimal routing</td>
<td>Only use in large environments (100+ routers)</td>
</tr>
<tr>
<td>Simple implementation and maintenance</td>
<td>Use regular areas if possible</td>
</tr>
<tr>
<td>Best suited for MPLS TE</td>
<td>Use stub and NSSA in case of old, CPU-hungry and/or memory-hungry routers</td>
</tr>
<tr>
<td>--</td>
<td>Ensure HA ABR's</td>
</tr>
<tr>
<td>--</td>
<td>Focus on addressing plan to enable effective summarization</td>
</tr>
</tbody>
</table>
<h2 id="ospf-area-and-lsa-types">OSPF Area and LSA Types</h2>
<h3 id="area-types">Area types</h3>
<ul>
<li>Backbone area 0 </li>
<li>Regular area</li>
<li><ins>Stub area</ins>: does not accept route info that are external to the AS, such as non-OSPF sources redistributed. They use a default route to route outside the area. It cannot contain an ASBR unless the ABR is also a ASBR. </li>
<li><ins>Totally Stubby</ins>: does not accept external or summary routes from other areas. They use a default route to route outside the area. It cannot contain ASBR unless the ABR is also a ASBR.</li>
<li><ins>NSSA</ins>: Similiar to stub area, except it allows for ASBR and uses special type 7 LSA for external routes inside NSSA area.</li>
<li><ins>Totally NSSA</ins>: Similiar to totally stubby, in that it does not accept external AS routes or summary routes, but it can contain ASBR and external LSA type 7 routes. Cisco proprietary.</li>
</ul>
<h3 id="lsa-types">LSA types</h3>
<ul>
<li><strong>LSA Type 1 - Router LSA</strong> -- These exchange info about nodes within an area, and they do not leave the area. They are used to describe the state of router links.<ul>
<li>In OSPFv3, router LSA's contain no address info. Instead, there is a new link LSA Type 8 that provides link-local and other addresses on a link for OSPFv3.</li>
</ul>
</li>
<li><strong>LSA Type 2 - Network LSA</strong> -- Exchange info about multiaccess links within area, and they never leave the area. DR's generate these. Only flooded in the area that which they belong too.<ul>
<li>In OSPFv3, network LSA's contain no address info. The new type 9 LSA intra-area-prefix LSA has route info.</li>
</ul>
</li>
<li><strong>LSA Type 3 - Summary LSA</strong> -- ABR's generate summary LSA's based on type 1/2 LSA's, which are flooded into the backbone area to other ABR's. <ul>
<li>These are not flooded into totally stubby or totally NSSA areas.</li>
</ul>
</li>
<li><strong>LSA Type 4 - Summary ASBR LSA</strong> -- ABR's generate summary advertisements that describe routes to ASBR's. The ASBR floods type 1's, which are converted to Type 4 by ABR's into backbone.<ul>
<li>These are not flooded into totally stubby or totally NSSA areas.</li>
</ul>
</li>
<li><strong>LSA Type 5 - External LSA</strong> -- ASBR generates AS external link advertisements. They describe routes to destinations external to the OSPF AS and are flooded only into backbone and regular areas (none of the stubs).</li>
<li><strong>LSA Type 7 - NSSA LSA</strong> -- used by NSSA areas for external routes. These are converted by ABR's into Type 5 when flooding into backbone.</li>
</ul>
<h2 id="ospfv2-path-selection">OSPFv2 Path Selection</h2>
<h3 id="overview">Overview</h3>
<ul>
<li>OSPF path selection uses link costs as a metric and the Dijkstra algorithm to build the SPT based on lowest total costs</li>
<li>Each link has an assigned cost, then that link is placed at the top of the tree, then the sum cost of links to the destination is calculated. 
<img alt="Screenshot" src="../img/ospf-cost-graph.png" /></li>
</ul>
<h3 id="ospf-metric">OSPF Metric</h3>
<ul>
<li>By default, this is proportional to the bw of the link, but this is out of date given that Gigabit 1Gbps = cost 1. </li>
<li>General guidance is to set reference bw to higher value, like 400Gbps 
<div class="highlight"><span class="filename">both IOS XE and XR</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># auto-cost reference-bandwidth 400000</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># bw in Mbps // 400000 == 400Gbps</span>
</code></pre></div></li>
<li>You can manually configure cost too
<div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># ip ospf cost 4000</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 0</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># int Gi0/0/0/1</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># cost 4000</span>
</code></pre></div></li>
</ul>
<h3 id="path-selection-criteria">Path Selection Criteria</h3>
<ul>
<li>It is important to remember cost is not the most preferred</li>
<li>Select the path based on LSA preference<ol>
<li>Intra Area</li>
<li>Inter Area</li>
<li>External Type 1</li>
<li>NSSA Type 1 </li>
<li>External Type 2</li>
<li>NSSA Type 2</li>
</ol>
</li>
<li>Then if there are multiple paths of the same type, evaluate one with the lowest cost</li>
</ul>
<h2 id="ospfv2-summarization">OSPFv2 Summarization</h2>
<ul>
<li>Summarization is the key to scaling OSPF. It saves you from a large routing table and frequent flooding throughout the backbone due to potential link flaps. A summary route can hold down (aka not flap) more specific prefixes inside the summary. </li>
<li>An ABR will automatically translate the Type 1 and Type 2 LSA's into their individual Type 3 Summary LSA's, and when enabled, they can summarize these into consolidated Type 3's. </li>
<li>A good addressing plan that lends itself to aggregation at the OSPF area borders is key!</li>
</ul>
<h3 id="ospf-interarea-route-summarization">OSPF Interarea Route Summarization</h3>
<ul>
<li>Only ABR's can summarize. Use <code>area 1 range</code> on IOS XE and <code>range</code> on IOS XR.</li>
<li>Summary cost is equal to the minimum cost of a summarized prefix (RFC1583, default), or if enabled, the maximum cost based on RFC2328. <code>no compatible rfc1583</code></li>
<li>The ABR will generate a Null0 route for loopback protection</li>
</ul>
<h4 id="configuration-example-on-abr-between-area-0-and-area-1">Configuration example on ABR between Area 0 and Area 1</h4>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 1 range 192.168.0.0 255.255.0.0</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 1</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># range 192.168.0.0/16</span>
</code></pre></div></p>
<h3 id="ospf-external-route-summarization">OSPF External Route Summarization</h3>
<ul>
<li>Summarization of external routes can be done on the ASBR for type 5 LSAs (redistributed routes) before injecting them into the OSPF domain. Use <code>summary-address</code> on IOS XE and <code>summary-prefix</code> on IOS XR.</li>
<li><code>not-advertise</code> will filter out longer-prefixes within summary</li>
<li>For NSSA areas, the ABR can summarize the Type 7 LSA's and associated external routes</li>
<li><strong>NOTE</strong> -- when redistributing on an ASBR, the imported prefixes will use subtype 2 (E2) by default. These have a "frozen" cost that will not increment cost based on link path when doing SPT. E1 subtype can be used for original external cost + total internal metric (per normal).</li>
</ul>
<h4 id="configuration-example-for-external-route-summarization">Configuration example for External Route Summarization</h4>
<ul>
<li>This is on the <em>ASBR</em> at the external AS boundary where redistribution happens
<div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># summary-address 10.10.0.0 255.255.0.0 not-advertise</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 1</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># summary-prefix 10.10.0.0 255.255.0.0</span>
</code></pre></div></li>
</ul>
<h2 id="ospf-special-areas">OSPF Special Areas</h2>
<ul>
<li>Overall purpose is to inject a default route to reduce number of LSA's flooded into special area</li>
<li>Stub areas are designed to reduce the amount of flooding, the LSDB size, and the routing table size in routers within the area</li>
<li>They improve performance in OSPF networks and improve scalability</li>
</ul>
<h3 id="ospf-stubby-area">OSPF Stubby Area</h3>
<ul>
<li>Do not accept LSA's that are external to the AS, such as Type 5 LSA</li>
<li>The Type 3 LSA allowed, and a default route injected as a Type 3. By default, the default route cost is 1. <code>area default-cost</code> to modify this. </li>
<li>ALL routers in the stub area must be configured with <code>stub</code> configuration, including the ABR</li>
</ul>
<h4 id="configuration-examples-stubby-area">Configuration Examples - Stubby Area</h4>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 stub</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># stub</span>
</code></pre></div></p>
<h3 id="ospf-totally-stubby-area">OSPF Totally Stubby Area</h3>
<ul>
<li>Same as Stub area + filters <strong><em>ALL</em></strong> Type 3 LSA's. The only Type 3 allowed is the injected default route by ABR. </li>
<li>Cisco proprietary enhancement to further reduce the number of routes and LSA's</li>
<li>Using totally stubby areas is typically a better solution than using stub areas</li>
</ul>
<h4 id="configuration-examples-totally-stubby-area">Configuration Examples - Totally Stubby Area</h4>
<ul>
<li>Uses the addition of <code>no-summary</code> on area stub commands</li>
</ul>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 stub no-summary</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># stub no-summary</span>
</code></pre></div></p>
<h3 id="ospf-nssa">OSPF NSSA</h3>
<ul>
<li>Same as a stub area, so Type 3 LSA's are allowed + a Type 3 with default route injected by ABR</li>
<li>Defines a special type 7 LSA to allow for ASBR in a stub area for route redistribution</li>
<li>At the ABR, the type 7 LSA is converted into a type 5 LSA</li>
<li>In the case that the ABR is also the ASBR, type 7 LSAs <em>NOT</em> have the propagate-bit (P-bit) in the LSA header to prevent propagation loops between the NSSA and the backbone area. If the ASBR is not the ABR, the the P-bit will be set, and the ABR will know to convert to Type 5 and flood into backbone area.</li>
<li>If there are multiple ABR's in NSSA, only the ABR with the highest Router ID will translate these Type 7's with P-bit</li>
<li>In the routing table, Type 7 LSA's are shown as <code>O N2</code> by default, or if desired, they can be <code>O N1</code> like external type 1 with calculated total cost. </li>
</ul>
<h4 id="configuration-examples-nssa">Configuration Examples - NSSA</h4>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 nssa</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># nssa</span>
</code></pre></div></p>
<h3 id="ospf-totally-nssa">OSPF Totally NSSA</h3>
<ul>
<li>Same as NSSA combined with Totally Stubby to filter out Type 3 LSA's</li>
<li>Cisco proprietary enhancement
<div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 nssa no-summary</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># nssa no-summary</span>
</code></pre></div></li>
</ul>
<h3 id="ospf-area-design-guidelines">OSPF Area Design Guidelines</h3>
<ul>
<li>Use a single area if possible</li>
<li>Use regular areas if needed for scalability</li>
</ul>
<p><img alt="Screenshot" src="../img/ospf-stub-guide.png" /></p>
<h2 id="ospfv2-virtual-links">OSPFv2 Virtual Links</h2>
<ul>
<li>Used in rare scenarios where an area is introduced that cannot have direct physical or logical access to the backbone area 0.<ul>
<li>I.E. - M&amp;A's or combining previous segmented networks</li>
</ul>
</li>
</ul>
<h3 id="virtual-link-use-cases">Virtual Link Use Cases</h3>
<ul>
<li>VL can be used to connect discontiguous backbone area 0's, and it can be used to connect another regular or stub area through a nonbackbone area to the backbone area 0.</li>
<li>Relies on intra-area routing and stability of the underlying area. If you are connecting two area 0's together via a regular area that has poor stability, it could be a bad time.</li>
</ul>
<h3 id="virtual-link-characteristics">Virtual Link Characteristics</h3>
<ul>
<li>the virtual link cost = total cost in path to destination</li>
<li>serves as an extension of the backbone area 0</li>
<li>cannot traverse stubby or NSSA areas!!</li>
<li>also cannot traverse unnumbered links (?)</li>
<li>the virtual link is treated as a direct connection between the ABR's of connected areas. Ideally you would use loopback interfaces as router ID to source the connectivity for the virtual links.</li>
</ul>
<h4 id="configuration-examples-virtual-links">Configuration Examples - Virtual Links</h4>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">router</span><span class="o">-</span><span class="n">abr2</span><span class="c1"># conf t</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">router</span><span class="o">-</span><span class="n">abr2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">router</span><span class="o">-</span><span class="n">abr2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 virtual-link 10.1.1.55</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">router</span><span class="o">-</span><span class="n">abr55</span><span class="c1"># conf t</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">router</span><span class="o">-</span><span class="n">abr55</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">router</span><span class="o">-</span><span class="n">abr55</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="n">router</span><span class="o">-</span><span class="n">abr55</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># virtual-link 10.1.1.2</span>
</code></pre></div></p>
<h3 id="virtual-link-guidelines">Virtual Link Guidelines</h3>
<ul>
<li>Do not use these as a primary design tool</li>
<li>A valid virtual link use case is where there is one physical link between two ABRs in the same area, and the link should be available to the backbone area and nonbackbone area.</li>
</ul>
<h2 id="ospf-fast-convergence">OSPF Fast Convergence</h2>
<ul>
<li>By default, OSPF can take up to 40 seconds to converge upon a link or device failure.<ul>
<li>Default hello timer = 10 seconds</li>
<li>Default dead timer = 40 seconds</li>
</ul>
</li>
<li>Cisco (and standards-based) techniques to improve convergence and OSPF stability:<ul>
<li>Tune OSPF timers (hello/dead intervals, SPF, LSA)</li>
<li>Cisco Nonstop Forwarding (NSF)</li>
<li>Cisco Nonstop Routing (NSR)</li>
<li>Bidirectional Forwarding Detection (BFD) for OSPF</li>
</ul>
</li>
</ul>
<h3 id="tuning-ospf-timers">Tuning OSPF Timers</h3>
<ul>
<li>Lower timers can result in quicker detection and convergence time</li>
<li>Configured at interface levels (and they must match to ensure stable adjacency between neighbors)
<div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface gi1/2</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip ospf hello-interval 5</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip ospf dead-interval 15</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1"># OR another dead-interval style conf</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip ospf dead-interval minimal hello-multiplier 3</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 2</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># interface gi0/0/1/5</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># hello-interval 5</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># dead-interval 15</span>
</code></pre></div></li>
</ul>
<h3 id="cisco-nsf-and-nsr">Cisco NSF and NSR</h3>
<ul>
<li>Cisco NSF and Cisco NSR are two techniques that can provide stability to routing during route processor (RP) failures, restarts, switchovers, process restarts, and similar events in which the routing tables would be flushed due to loss of OSPF process.</li>
<li>NSF allows data plane to continue forwarding during RP failover while the standby RP re-establishes OSPF database and state.</li>
<li>Upon a RP failure, the NSF-capable router sends an OSPF Cisco NSF signal to neighboring NSF-aware devices to not reset adjacency in the form of a link-local LSA (type 8?). The NSF-cabable (failed over device) rebuilds neighbor list based on this LSA and response.</li>
<li>
<p>It rebuilds neighbor list and then resyncs the LSDB with all NSF-aware neighbors to remove stale entries and update RIB and FIB. </p>
</li>
<li>
<p>Cisco NSR allows RP failures, process restarts, and in-service upgrades to be invisible to peers. If available, makes it easier to utilize NSF and IETF graceful restart protocol extensions</p>
</li>
</ul>
<h3 id="bidirectional-forwarding-detection-bfd">Bidirectional Forwarding Detection (BFD)</h3>
<ul>
<li>BFD provides a low-overhead, short-duration method of detecting failures in the forwarding path between two adjacent routers, including the interfaces, data links, and forwarding planes</li>
<li>Async mode is supported, so after it is configured, a session is created, timers are negotiated, and peers send BFD control plane packets at negotiated interval.</li>
<li>No neighbor discovery process-- configured on both sides.</li>
<li>BFD relies on control packets or echo packets<ul>
<li>They are IP packets addressed to the sending router itself but forwarded to the L2 address of the next-hop node. When the neighboring router receives this packet, it performs a L3 lookup (based on IP dst address) and sends the packet back to the final destination (the originating router)</li>
</ul>
</li>
</ul>
<h4 id="configuring-bfd-for-ospf">Configuring BFD for OSPF</h4>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface gi1/2</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># bfd interval 50 min_rx 50 multiplier 5</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip ospf bfd</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="c1"># OR </span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># bfd all-interfaces</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospf 1</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># bfd minimum-interval 50</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># bfd multiplier 5</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 1</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># interface gi0/0/1/5</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># bfd fast-detect</span>
</code></pre></div></p>
<h2 id="ospf-for-ipv6">OSPF for IPv6</h2>
<ul>
<li>OSPFv3 is a multiprotocol implementation of OSPF that supports IPv6 in addition to IPv4</li>
<li>Router-id is no longer based on IPv4 address, it is configured in the routing process and is still a 32-bit number that is used to sign routing updates</li>
<li>OSPFv3 adfancies and next-hop attributes use link-local addresses</li>
<li>IPv6 is used to transport LSA's</li>
<li>Only enabled per-link, not per-network</li>
<li>Router ID, area ID, and link-state ID remain 32 bits (not from an IPv4 address)</li>
<li>LSA's have a flooding scope based on a radius:<ul>
<li>link-local</li>
<li>area</li>
<li>AS</li>
<li>handling and forwarding of unknown LSA's is supported</li>
</ul>
</li>
<li>Uses link-local multicast addresses:<ul>
<li>FF02::5 for OSPF routers</li>
<li>FF02::6 for OSPF DR's</li>
</ul>
</li>
</ul>
<h3 id="different-or-renamed-lsas">Different or renamed LSA's</h3>
<p><strong>Interarea-prefix LSA for ABRs (Type 3)</strong> -- advertises internal networks to routers in other areas. Prefix length is used instead of subnet mask. Default route is a /0 prefix length.</p>
<p><strong>Interarea LSA for ASBR (Type 4)</strong> -- advertses the location of an ASBR. Routers trying to reach an external network use these to determine the best path to the next hop. ABR's generate these on behalf of ASBR.</p>
<h3 id="new-lsas">New LSA's</h3>
<p><strong>Link LSA (Type 8)</strong> -- <em>(replaces Type 1)</em> Link-local flooding scope. They are not flooded beyond the link with which they are associated. They provide a link-local address of router to all other routers on the link, informing others attached on that local link of prefixes associated with the link, and also allows the originating router to asset a collection of option bits with that network LSA that will be originated for the link.</p>
<p><strong>Intra-area-prefix LSA (Type 9)</strong> -- <em>(replaces Type 2)</em> a router can originate LSA type 9's for each router or transit network with unique link-state ID's. The link-state ID describes its association to either a router or network LSA and contains prefixes for stub or transit networks.</p>
<h3 id="configuring-ospfv3">Configuring OSPFv3</h3>
<ul>
<li>A routing process is not explicitly required, just enable an interface and it will cause a routing process to be created.</li>
</ul>
<p><div class="highlight"><span class="filename">IOS XE</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># IPv6 addressing is implied</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface gi1/2</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ipv6 ospf 1 area 0</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 router ospf 1</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># area 2 range 2001:db9:1::/48</span>
</code></pre></div>
<div class="highlight"><span class="filename">IOS XR</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">router</span><span class="c1"># conf t</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router ospfv3 1</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="p">)</span><span class="c1"># area 0 </span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="n">router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">ospf</span><span class="o">-</span><span class="n">ar</span><span class="p">)</span><span class="c1"># int gi0/0/1/5</span>
</code></pre></div></p>
<ul>
<li>For IOS XR, both inter-area route summarization uses the <code>range</code> config, and <code>summary-prefix</code> for external route summarization on ASBR (upon redistribution into OSPF from external AS)</li>
</ul>
<h2 id="troubleshooting-ospf">Troubleshooting OSPF</h2>
<ul>
<li>Understanding the requirements and limitations of OSPF is critical to troubleshooting</li>
<li>OSPF neighborships/adjacency requires these to align:<ul>
<li><ins>area id</ins>: the areas configured on interfaces</li>
<li><ins>hello and dead intervals</ins>: must/should match. If not, then possibly if no hellos within the dead interval, then neighbor is declared dead</li>
<li><ins>subnet mask</ins>: must match; although not requirement for p2p links</li>
<li><ins>authentication key</ins>: must match, if not there is no adjacency</li>
<li><ins>network type</ins>: p2p or other, must match so DR/BDR election can take place</li>
<li><ins>stub flag</ins>: routers must use the same flag</li>
<li><ins>MTU</ins>: LSA's can or will be dropped if there is a mismatch </li>
</ul>
</li>
</ul>
<h3 id="troubleshooting-incomplete-ospf-adjacency">Troubleshooting Incomplete OSPF Adjacency</h3>
<ul>
<li>Final OSPF state is Full after routing tables are synced.</li>
<li><a href="https://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/13685-13.html#toc-hId--671632336">Cisco.com OSPF Neighbor States</a></li>
<li>On a multiaccess network, a router will stay in 2-way state with non-DR/BDR neighbors</li>
</ul>
<p><strong>Common Issues in each state</strong>:</p>
<ul>
<li>DOWN state or there is no state<ul>
<li>OSPF process has not received any hellos packets from neighbor</li>
<li>Things to look at:<ol>
<li>Check cabling, check ACL's or firewalls to verify forwarding and tx/rx between neighbors</li>
<li>Verify OSPF is enabled -- <code>show ip ospf int</code></li>
<li>Verify that OSPF is not passive on interface</li>
<li>Check that the router ID is different on both sides</li>
<li>Validate the required parameters</li>
</ol>
</li>
</ul>
</li>
<li>INIT State<ul>
<li>Router has received a hello packet from neighbor, but it does not yet see its own router ID in the hello packet from neighbor</li>
<li>Things to look at:<ol>
<li>Verify ACL's or firewalls to verify forwarding and tx/rx between neighbors</li>
<li>Check there are no layer 2 problems between neighbors</li>
<li>Verify authentication matches on both sides if using</li>
</ol>
</li>
</ul>
</li>
<li>EXSTART, Exchange<ul>
<li>The Database Description (DBD) and LSA packet exchange were not successful after DR, BDR election</li>
<li>Check MTU or if NAT is being used to translate OSPF packets</li>
<li>Check for possible interoperability issues if neighbor is another vendor </li>
<li>Verify the router ID's are different</li>
</ul>
</li>
</ul>
<h3 id="ospf-route-exchange-troubleshooting-between-areas">OSPF Route Exchange Troubleshooting between Areas</h3>
<ul>
<li>If there is a discontiguous area 0 or another area is seperated from area 0, then there will be route exchange issues since all areas rely on area 0 to exchange routing information</li>
<li>If there is inconsistent routing, validate that:<ul>
<li>OSPF interfaces are in the correct and intended area</li>
<li>Check ABR's - <code>show ospf border-routers</code></li>
<li>Validate there is no route-map or route-policy filtering inbound routes</li>
</ul>
</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.path", "navigation.indexes", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>